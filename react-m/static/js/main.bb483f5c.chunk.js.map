{"version":3,"sources":["utils/localStorageUtils.js","api/ajax.js","api/index.js","config/apiConfig.js","pages/login/login.jsx","config/menuConfig.js","component/left-nav/left-nav.jsx","utils/dateUtils.js","component/link-button/link-button.jsx","component/header/header.jsx","pages/home/home.jsx","pages/category/add-update-form.jsx","pages/category/category.jsx","pages/product/product.jsx","pages/product/product-detail/index.jsx","pages/product/pictures-wall/index.jsx","utils/constants.js","pages/product/rich-text-editor/index.jsx","pages/product/product-add-update/index.jsx","pages/product/home.jsx","component/pagination/index.jsx","pages/role/add-form/index.jsx","pages/role/auth-form/index.jsx","pages/role/role.jsx","pages/user/add-update-form/index.jsx","pages/user/user.jsx","pages/charts/bar.jsx","pages/charts/line.jsx","pages/charts/pie.jsx","pages/admin/admin.jsx","App.js","serviceWorker.js","index.js","assets/images/logo.jpg"],"names":["saveUser","data","localStorage","setItem","JSON","stringify","getUser","parse","getItem","removeUser","removeItem","axios","interceptors","request","use","config","method","response","error","message","Promise","urlPrefix","reqLogin","username","password","ajax","url","reqWeather","city","resolve","reject","jsonp","err","results","weather_data","dayPictureUrl","weather","reqCategoryList","page","per_page","get","params","reqAddCategory","name","reqGetProduct","reqGetSearchProduct","searchType","k","reqUpdateProduct","proId","reqCategoryName","cateId","reqProductDetail","reqCategorys","reqDeleteImg","delete","reqAddProduct","post","reqGetRoles","reqAddRole","roleName","reqUpdateRole","_id","patch","reqUserList","reqAddUser","reqUpdateUser","reqDeleteUser","Item","Login","handleSubmit","e","preventDefault","props","form","getFieldsValue","validateFields","a","result","status","localStorageUtils","history","replace","resetFields","alert","this","validatePwd","rule","value","callback","trim","length","test","to","getFieldDecorator","className","src","logo","alt","onSubmit","rules","required","min","max","pattern","prefix","type","style","color","placeholder","initialValue","validator","htmlType","Component","WrapForm","create","menuList","title","key","icon","public","children","SubMenu","LeftNav","getMenuNodes","map","menu","hasAuth","path","location","pathname","find","cItem","indexOf","openKey","item","user","menus","role","menuNodes","selectedKeys","onClick","handleClick","defaultOpenKeys","mode","theme","withRouter","formatDate","time","date","Date","getFullYear","format","getMonth","getDate","getHours","getMinutes","getSeconds","arg","Number","LinkButton","confirm","Header","handleLogout","onOk","onCancel","console","log","getTitle","forEach","cMenu","getWeather","setState","state","currentTime","now","timer","setInterval","clearInterval","Home","AddUpdateForm","setForm","categoryName","WrapperAddUpdateForm","Category","handleGetData","total","errorMessage","categorys","initColumns","columns","dataIndex","width","render","category","showStatus","handleReGetData","onShowSizeChange","current","pageSize","onChange","values","success","showModal","loading","extra","paginationOptions","defaultPageSize","showQuickJumper","showSizeChanger","bordered","rowKey","dataSource","pagination","visible","okText","cancelText","Product","initProducts","products","price","btnText","text","updateProStatus","product","push","handleChange","target","throttle","val","Option","margin","ProductDetail","getCategoryName","initGetProductDetail","categoryId","id","match","desc","detail","imgs","image","index","dangerouslySetInnerHTML","__html","getBase64","file","reader","FileReader","readAsDataURL","onload","onerror","PicturesWall","previewVisible","previewImage","fileList","handleCancel","handlePreview","preview","originFileObj","getImgs","uploadButton","action","listType","onPreview","footer","nextProps","prevState","img","uid","React","RichTextEditor","editorState","EditorState","createEmpty","onEditorStateChange","debounce","uploadImageCallBack","xhr","XMLHttpRequest","open","FormData","append","send","addEventListener","responseText","link","getDetail","draftToHtml","convertToRaw","getCurrentContent","toolbar","uploadCallback","present","mandatory","toolbarClassName","wrapperClassName","editorStyle","height","overflow","lineHeight","border","padding","contentBlock","htmlToDraft","contentState","ContentState","createFromBlockArray","contentBlocks","createWithContent","ProductAddUpdate","getCategorys","validatePrice","pwRef","editorRef","isUpdate","createRef","marginBottom","labelCol","span","wrapperCol","label","addonAfter","ref","WrapperProductAddUpdate","ProductHome","exact","component","MPagination","showTotal","pageNumber","pageSizeOptions","marginTop","float","defaultProps","AddForm","TreeNode","AuthForm","getCheckedKeys","checkedKeys","getNodes","reduce","pre","onCheck","nodes","disabled","checkable","defaultExpandAll","onSelect","closeAuth","PureComponent","Role","showAuth","getRoles","pageObj","roles","onChangeCurPageOrPageSize","addRole","isShowAdd","isShowAuth","udpateRole","updateRole","authRef","auth_name","auth_time","selectValue","email","phone","role_id","User","handleEditUser","handleDeleteUser","getUserList","users","userList","slice","formVisible","okType","handleOk","Bar","getOption","sales","stores","tooltip","legend","xAxis","yAxis","series","radius","roseType","normal","textStyle","labelLine","lineStyle","itemStyle","shadowBlur","shadowColor","update","sale","store","echarts","registerTheme","backgroundColor","option","Line","Pie","Sider","Content","Footer","Admin","toString","exec","background","borderBox","textAlign","App","Boolean","window","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.bb483f5c.chunk.js","sourcesContent":["/*\r\n * @Description: \r\n * @Version: 2.0\r\n * @Autor: Darren\r\n * @Date: 2019-11-21 19:25:29\r\n * @LastEditors: Darren\r\n * @LastEditTime: 2019-11-21 21:59:25\r\n */\r\nexport default {\r\n  saveUser(data) {\r\n    localStorage.setItem(\"user\", JSON.stringify(data))\r\n  },\r\n  getUser() {\r\n    return JSON.parse(localStorage.getItem(\"user\") || \"{}\")\r\n  },\r\n  removeUser() {\r\n    localStorage.removeItem(\"user\")\r\n  }\r\n}","/*\r\n * @Description: \r\n * @Version: 2.0\r\n * @Autor: Darren\r\n * @Date: 2019-11-21 14:42:48\r\n * @LastEditors: Darren\r\n * @LastEditTime: 2019-11-21 15:13:16\r\n */\r\nimport axios from 'axios'\r\nimport { message } from 'antd'\r\nimport qs from 'qs'\r\n// 添加请求拦截器\r\naxios.interceptors.request.use(function(config) {\r\n  const { method, data } = config\r\n  // 处理post请求\r\n  // a=1&b=2\r\n  // if (method.toLowerCase() === 'post' && typeof data === 'object') {\r\n  //  config.data = qs.stringify(data)\r\n  // }\r\n  return config\r\n})\r\n\r\n// 响应拦截器\r\naxios.interceptors.response.use(function(response) {\r\n  return response.data\r\n}, function(error) {\r\n  message.error('请求错误' + error.message);\r\n  return new Promise(() => {})\r\n})\r\n\r\nexport default axios","/*\r\n * @Description: \r\n * @Version: 2.0\r\n * @Autor: Darren\r\n * @Date: 2019-11-21 14:42:53\r\n * @LastEditors: Darren\r\n * @LastEditTime: 2019-12-01 15:50:41\r\n */\r\n/* \r\n  包含应用中所有接口请求函数\r\n*/\r\n\r\nimport ajax from './ajax'\r\nimport jsonp from 'jsonp'\r\nimport { ak } from '../config/apiConfig'\r\nimport { message } from 'antd'\r\nconst urlPrefix = \"/api\"\r\nexport function reqLogin(username, password) {\r\n  return ajax({\r\n    method: \"POST\",\r\n    url: `${urlPrefix}/login`,\r\n    data: {\r\n      username,\r\n      password\r\n    }\r\n  })\r\n}\r\n\r\nexport const reqWeather = (city) => {\r\n  return new Promise((resolve, reject) => {\r\n    const url = `http://api.map.baidu.com/telematics/v3/weather?location=${city}&output=json&ak=${ak}`\r\n    jsonp(url, {}, (err, data) => {\r\n      if (!err && data.error === 0) {\r\n        const { dayPictureUrl, weather } = data.results[0].weather_data[0]\r\n        resolve({ dayPictureUrl, weather })\r\n      } else {\r\n        message.error(\"获取天气信息失败\")\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nexport const reqCategoryList = (page = 1, per_page = 3) => ajax.get(`${urlPrefix}/categorys/`, { params: { page, per_page } })\r\n\r\nexport function reqAddCategory(name) {\r\n  return ajax({\r\n    method: \"POST\",\r\n    url: `${urlPrefix}/categorys/`,\r\n    data: {\r\n      name\r\n    }\r\n  })\r\n}\r\n\r\nexport function reqUpdateCategory(cateId, name) {\r\n  return ajax.patch(`${urlPrefix}/categorys/${cateId}`, { name: name })\r\n}\r\n\r\n// 请求商品列表\r\nexport const reqGetProduct = () => ajax(\"/api/products\")\r\n\r\n// 商品搜索\r\nexport const reqGetSearchProduct = (searchType, k) => ajax(\"/api/products\", { params: { searchType, k } })\r\n\r\n\r\n// 更新商品\r\nexport function reqUpdateProduct(proId, data) {\r\n  return ajax({\r\n    method: \"PATCH\",\r\n    url: `${urlPrefix}/products/${proId}`,\r\n    data\r\n  })\r\n}\r\n\r\n// 根据分类ID获取分类名称\r\nexport const reqCategoryName = (cateId) => ajax(`${urlPrefix}/categorys/${cateId}`)\r\n\r\n// 根据商品ID获取商品数据\r\nexport const reqProductDetail = (proId) => ajax(`${urlPrefix}/products/${proId}`)\r\n\r\n// 获取分类列表\r\nexport const reqCategorys = () => ajax(`${urlPrefix}/categorys/`)\r\n\r\n\r\n// 删除图片\r\nexport const reqDeleteImg = (name) => ajax.delete(`${urlPrefix}/products/image/upload`, { params: { name } })\r\n\r\n\r\n// 添加商品\r\nexport const reqAddProduct = (data) => ajax.post(`${urlPrefix}/products`, data)\r\n\r\n// 获取角色列表\r\nexport const reqGetRoles = ({ page, per_page }) => ajax(`${urlPrefix}/roles`, { params: { page, per_page } })\r\n\r\n\r\n// 添加角色\r\nexport const reqAddRole = (roleName) => ajax.post(`${urlPrefix}/roles/`, { roleName })\r\n\r\n// 更新角色权限\r\nexport const reqUpdateRole = (_id, data) => ajax.patch(`${urlPrefix}/roles/${_id}`, data)\r\n\r\n\r\n// 获取所有角色列表\r\nexport const reqUserList = () => ajax(`${urlPrefix}/users/`)\r\n\r\n// 添加用户\r\nexport const reqAddUser = (data) => ajax.post(`${urlPrefix}/users/`, data)\r\n\r\n\r\n// 修改用户\r\nexport const reqUpdateUser = (_id, data) => ajax.patch(`${urlPrefix}/users/${_id}`, data)\r\n\r\n// 删除用户\r\nexport const reqDeleteUser = (_id) => ajax.delete(`${urlPrefix}/users/${_id}`)","/*\r\n * @Description: \r\n * @Version: 2.0\r\n * @Autor: Darren\r\n * @Date: 2019-11-22 19:15:29\r\n * @LastEditors: Darren\r\n * @LastEditTime: 2019-11-22 19:16:22\r\n */\r\nexport const ak = '3p49MVra6urFRGOT9s8UBWr2'","import React, { Component } from \"react\";\r\nimport { Form, Icon, Input, Button, message } from \"antd\";\r\nimport {Redirect} from 'react-router-dom'\r\nimport localStorageUtils from '../../utils/localStorageUtils'\r\nimport { reqLogin } from \"../../api\";\r\nimport logo from \"../../assets/images/logo.jpg\";\r\nimport \"./login.less\";\r\nconst Item = Form.Item;\r\nclass Login extends Component {\r\n  handleSubmit = e => {\r\n    // 阻止表单的默认行为\r\n    e.preventDefault();\r\n    const { form } = this.props;\r\n    const values = form.getFieldsValue();\r\n    this.props.form.validateFields(async (err, { username, password }) => {\r\n      if (!err) {\r\n        const result = await reqLogin(username, password);\r\n        if (result.status === 0) {\r\n          // 登录成功\r\n          localStorageUtils.saveUser(result.data)\r\n          this.props.history.replace(\"/\");\r\n        } else {\r\n          // 登录失败\r\n          message.error(result.message);\r\n          this.props.form.resetFields();\r\n        }\r\n      } else {\r\n        // 验证失败\r\n        alert(\"验证失败\");\r\n      }\r\n    });\r\n  };\r\n\r\n  validatePwd = (rule, value, callback) => {\r\n    /* \r\n     1) 密码必须输入\r\n     2) 必须大于六位\r\n     3) 必须小于十六位\r\n     4) 必须是有英文数字和下划线\r\n    */\r\n    value = value.trim();\r\n    if (!value) {\r\n      callback(\"请输入密码\");\r\n    } else if (value.length < 3) {\r\n      callback(\"密码必须大于3位\");\r\n    } else if (value.length > 16) {\r\n      callback(\"密码必须小于16位\");\r\n    } else if (!/^[a-zA-Z0-9_]+$/.test(value)) {\r\n      // /^.*(?=.{6,})(?=.*\\d)(?=.*_)(?=.*[a-zA-Z]).*$/\r\n      callback(\"密码必须由数字或字母或下划线组成\");\r\n    } else {\r\n      callback();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const user_id = localStorageUtils.getUser()._id\r\n    if(user_id){\r\n      return <Redirect to=\"/\"/>\r\n    }\r\n\r\n    // 接受一个form属性， 是一个对象类型吧， 有一个方法\r\n    const { getFieldDecorator } = this.props.form;\r\n    return (\r\n      <div className=\"login\">\r\n        <div className=\"login-header\">\r\n          <img src={logo} alt=\"\" />\r\n          <h1>React项目 后台管理系统</h1>\r\n        </div>\r\n        <div className=\"login-content\">\r\n          <h1>用户登录</h1>\r\n          <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n            <Item>\r\n              {getFieldDecorator(\"username\", {\r\n                rules: [\r\n                  { required: true, message: \"请输入用户名\" },\r\n                  { min: 4, message: \"用户名不能小于4位\" },\r\n                  { max: 16, message: \"用户名不能大于16位\" },\r\n                  {\r\n                    pattern: /^[a-zA-Z0-9_]+$/,\r\n                    message: \"用户名必须是英文字母和数字和下划线组成\"\r\n                  }\r\n                ]\r\n              })(\r\n                <Input\r\n                  prefix={\r\n                    <Icon type=\"user\" style={{ color: \"rgba(0,0,0,.25)\" }} />\r\n                  }\r\n                  placeholder=\"用户名\"\r\n                />\r\n              )}\r\n            </Item>\r\n            <Item>\r\n              {getFieldDecorator(\"password\", {\r\n                initialValue: \"\",\r\n                rules: [{ validator: this.validatePwd }]\r\n              })(\r\n                <Input\r\n                  prefix={\r\n                    <Icon type=\"lock\" style={{ color: \"rgba(0,0,0,.25)\" }} />\r\n                  }\r\n                  type=\"password\"\r\n                  placeholder=\"密码\"\r\n                />\r\n              )}\r\n            </Item>\r\n            <Item>\r\n              <Button\r\n                type=\"primary\"\r\n                htmlType=\"submit\"\r\n                className=\"login-form-button\"\r\n              >\r\n                登录\r\n              </Button>\r\n            </Item>\r\n          </Form>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nconst WrapForm = Form.create()(Login);\r\n\r\n// Form.create()是一个函数 利用Form.create()包装form组件生成一个新的组件\r\n// 新组件会向form传递一个属性： 属性名： form 类型为对象\r\n\r\n// 高阶组件\r\n// 本质是一个函数\r\n// 函数接受一个组件 返回一个新组件\r\n// Form.create()返回的函数就是一个高阶组件\r\n\r\n// 高阶函数\r\n// 接收的参数是函数或者返回值是函数\r\n// 常见的  数组遍历的方法 / 定时器 /promise / 高阶组件\r\n// 作用： 实现一个更强大的 动态的功能\r\n\r\n/*\r\n * 组件： 组件类 本质就是一个构造函数\r\n */\r\nexport default WrapForm;\r\n","/*\r\n * @Description: \r\n * @Version: 2.0\r\n * @Autor: Darren\r\n * @Date: 2019-11-21 20:46:57\r\n * @LastEditors: Darren\r\n * @LastEditTime: 2019-11-21 20:49:16\r\n */\r\nconst menuList = [{\r\n    title: '首页', // 菜单标题名称\r\n    key: '/home', // 对应的path\r\n    icon: 'home', // 图标名称\r\n    public: true, // 公开的\r\n  },\r\n  {\r\n    title: '商品',\r\n    key: '/products',\r\n    icon: 'appstore',\r\n    children: [ // 子菜单列表\r\n      {\r\n        title: '品类管理',\r\n        key: '/category',\r\n        icon: 'bars'\r\n      },\r\n      {\r\n        title: '商品管理',\r\n        key: '/product',\r\n        icon: 'tool'\r\n      },\r\n    ]\r\n  },\r\n\r\n  {\r\n    title: '用户管理',\r\n    key: '/user',\r\n    icon: 'user'\r\n  },\r\n  {\r\n    title: '角色管理',\r\n    key: '/role',\r\n    icon: 'safety',\r\n  },\r\n\r\n  {\r\n    title: '图形图表',\r\n    key: '/charts',\r\n    icon: 'area-chart',\r\n    children: [{\r\n        title: '柱形图',\r\n        key: '/charts/bar',\r\n        icon: 'bar-chart'\r\n      },\r\n      {\r\n        title: '折线图',\r\n        key: '/charts/line',\r\n        icon: 'line-chart'\r\n      },\r\n      {\r\n        title: '饼图',\r\n        key: '/charts/pie',\r\n        icon: 'pie-chart'\r\n      },\r\n    ]\r\n  },\r\n]\r\n\r\nexport default menuList","import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom'\r\nimport { Menu, Icon } from 'antd'\r\nimport { withRouter } from 'react-router-dom'\r\nimport localStorageUtils from '../../utils/localStorageUtils'\r\nimport menuList from '../../config/menuConfig'\r\nimport './left-nav.less'\r\nimport logo from '../../assets/images/logo.jpg'\r\n\r\nconst { SubMenu } = Menu;\r\n\r\nclass LeftNav extends Component {\r\n\r\n  getMenuNodes = (menuList) => {\r\n    return menuList.map(menu => {\r\n      // 查看是否有权限\r\n      if (this.hasAuth(menu)) {\r\n        if (!menu.children) {\r\n          return (\r\n            <Menu.Item key={menu.key}>\r\n              <Link to={menu.key}>\r\n                <Icon type={menu.icon} />\r\n                {menu.title}\r\n              </Link>\r\n            </Menu.Item>\r\n          )\r\n        } else {\r\n          const path = this.props.location.pathname\r\n          const cItem = menu.children.find(cItem => path.indexOf(cItem.key) === 0)\r\n          if (cItem) {\r\n            this.openKey = menu.key\r\n          }\r\n          return (\r\n            <SubMenu\r\n              key={menu.key}\r\n              title={\r\n                <span>\r\n                  <Icon type={menu.icon} />\r\n                  <span>{menu.title}</span>\r\n                </span>\r\n              }\r\n            >\r\n              {\r\n                this.getMenuNodes(menu.children)\r\n              }\r\n            </SubMenu>\r\n          )\r\n        }\r\n      }\r\n\r\n    })\r\n  }\r\n\r\n  hasAuth = (item) => {\r\n    const user = localStorageUtils.getUser()\r\n    const menus = (user.role && user.role.menus) || []\r\n    if (item.public || menus.indexOf(item.key) !== -1 || user.username === 'admin') {\r\n      return true\r\n    } else if (item.children) {\r\n      const cItem = item.children.find(cItem => menus.indexOf(cItem.key) !== -1)\r\n      return !!cItem\r\n    }\r\n    return false\r\n  }\r\n\r\n  // 第一次render()执行之后\r\n  componentDidMount() {\r\n\r\n  }\r\n\r\n  // 第一次render()执行之前\r\n  componentWillMount() {\r\n    this.menuNodes = this.getMenuNodes(menuList)\r\n  }\r\n\r\n  render() {\r\n\r\n    let selectedKeys = this.props.location.pathname\r\n    if (selectedKeys.indexOf(\"/product\") === 0) {\r\n      selectedKeys = '/product'\r\n    }\r\n    return (\r\n      <div className=\"left-nav\">\r\n        <Link className=\"left-nav-link\" to=\"/home\">\r\n          <img className=\"left-nav-logo\" src={logo} alt=\"logo图片\" />\r\n          <h1>安琪后台</h1>\r\n        </Link>\r\n        {\r\n          /* \r\n            defaultSelectedKeys 总是根据第一次指定的key显示\r\n            selectedKeys 总是根据最新的key显示\r\n          */\r\n        }\r\n        <Menu\r\n          onClick={this.handleClick}\r\n          selectedKeys={[selectedKeys]}\r\n          defaultOpenKeys={[this.openKey]}\r\n          mode=\"inline\"\r\n          theme=\"dark\"\r\n        >\r\n          {\r\n            this.menuNodes\r\n          }\r\n        </Menu>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withRouter(LeftNav);","/*\r\n * @Description: \r\n * @Version: 2.0\r\n * @Autor: Darren\r\n * @Date: 2019-11-21 23:58:05\r\n * @LastEditors: Darren\r\n * @LastEditTime: 2019-11-22 00:04:42\r\n */\r\nexport function formatDate(time) {\r\n  if (!time) {\r\n    return \"\"\r\n  }\r\n  let date = new Date(time)\r\n  return date.getFullYear() + '-' + format((date.getMonth() + 1)) + '-' + format(date.getDate()) + ' ' + format(date.getHours()) + ':' + format(date.getMinutes()) + ':' + format(date.getSeconds())\r\n}\r\n\r\nfunction format(arg) {\r\n  return Number(arg) > 10 ? arg : `0${arg}`\r\n}","import React, { Component } from 'react'\r\nimport './link-button.less'\r\nfunction LinkButton(props){\r\n  return (\r\n    <button {...props} className=\"link-button\"/>\r\n  )\r\n}\r\n\r\nexport default LinkButton","import React, { Component } from 'react'\r\nimport { Modal, Button } from 'antd';\r\nimport {withRouter} from 'react-router-dom'\r\nimport localStorageUtils from '../../utils/localStorageUtils'\r\nimport {formatDate} from '../../utils/dateUtils'\r\nimport {reqWeather} from '../../api'\r\nimport './header.less'\r\nimport menuList from '../../config/menuConfig';\r\nimport LinkButton from '../link-button/link-button';\r\n\r\nconst { confirm } = Modal;\r\nclass Header extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      currentTime: Date.now(),\r\n      dayPictureUrl: \"\",\r\n      weather: \"\"\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    // 启动定时器\r\n    this.timer = setInterval(() => {\r\n      this.setState({\r\n        currentTime: Date.now()\r\n      })\r\n    }, 1000)\r\n\r\n    // 获取天气\r\n    this.getWeather()\r\n  }\r\n\r\n  componentWillUnmount(){\r\n    // 清除定时器\r\n    clearInterval(this.timer)\r\n  }\r\n\r\n  handleLogout = () => {\r\n    // 显示确认提示\r\n    confirm({\r\n      title: '确认要退出吗？',\r\n      onOk: () => {\r\n        localStorageUtils.removeUser()\r\n        this.props.history.replace(\"/login\")\r\n      },\r\n      onCancel: () => {\r\n        console.log('cancel');\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  getTitle = () => {\r\n    let title = \"\"\r\n    const path = this.props.location.pathname\r\n    menuList.forEach(menu => {\r\n      if(menu.key === path){\r\n        title = menu.title\r\n      }else if(menu.children){\r\n        const cMenu = menu.children.find(cItem => path.indexOf(cItem.key)===0)\r\n        if(cMenu){\r\n          title = cMenu.title\r\n        }\r\n      }\r\n    })\r\n    return title\r\n  }\r\n\r\n  getWeather = async () => {\r\n    const { dayPictureUrl, weather } = await reqWeather(\"广州\")\r\n    this.setState({\r\n      dayPictureUrl,\r\n      weather\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const user = localStorageUtils.getUser()\r\n    const title = this.getTitle()\r\n    return (\r\n      <div className=\"header\">\r\n        <div className=\"header-top\">\r\n          欢迎，{user.username}\r\n          <LinkButton onClick={this.handleLogout}>退出</LinkButton>\r\n          {/* <span onClick={this.handleLogout}>退出</span> */}\r\n        </div>\r\n        <div className=\"header-bottom\">\r\n          <div className=\"header-bottom-left\">{title}</div>\r\n          <div className=\"header-bottom-right\">\r\n            <span>{formatDate(this.state.currentTime)}</span>\r\n            <img src={this.state.dayPictureUrl} alt=\"weather\"/>\r\n            <span>{this.state.weather}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Header)\r\n","import React, { Component } from 'react'\r\nimport './home.less'\r\nclass Home extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"home\">\r\n        欢迎进入react后台管理系统\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Home","import React, { Component } from 'react'\r\nimport { Form, Button, Input } from 'antd'\r\nimport PropTypes from 'prop-types'\r\n\r\nconst Item = Form.Item\r\nclass AddUpdateForm extends Component {\r\n\r\n  static propTypes = {\r\n    setForm: PropTypes.func.isRequired,\r\n    categoryName: PropTypes.string\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.props.setForm(this.props.form)\r\n  }\r\n\r\n  render() {\r\n    const { categoryName } = this.props\r\n    const { getFieldDecorator } = this.props.form\r\n\r\n    return (\r\n      <Form>\r\n        <Item>\r\n          {\r\n            getFieldDecorator(\"categoryName\", {\r\n              initialValue: categoryName || \"\",\r\n              rules: [\r\n                {\r\n                  required: true, message: \"请输入分类名称\"\r\n                }\r\n              ]\r\n            })(<Input placeholder=\"请输入分类\" />)\r\n          }\r\n        </Item>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nconst WrapperAddUpdateForm = Form.create()(AddUpdateForm)\r\n\r\nexport default WrapperAddUpdateForm","import React, { Component } from 'react'\r\nimport { Table, Button, Card, Icon, message, Modal } from 'antd';\r\nimport { reqCategoryList, reqAddCategory, reqUpdateCategory } from '../../api'\r\nimport LinkButton from '../../component/link-button/link-button'\r\nimport './category.less'\r\nimport WrapperAddUpdateForm from './add-update-form';\r\n\r\nclass Category extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      categorys: [], // 分类数组\r\n      total: 0, // 总数量\r\n      per_page: 3, // 每页展示数量 即pageSize\r\n      page: 1, // 当前页码 即current\r\n      showStatus: 0, // 1 即为表示添加分类 2 即表示为更新分类\r\n      loading: false\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.initColumns()\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.setState({\r\n      loading: true\r\n    })\r\n    await this.handleGetData()\r\n    this.setState({\r\n      loading: false\r\n    })\r\n  }\r\n\r\n  handleGetData = async () => {\r\n    const { data, status, total, message: errorMessage } = await reqCategoryList()\r\n    if (status === 0) {\r\n      this.setState({\r\n        categorys: data,\r\n        total: total\r\n      })\r\n    } else {\r\n      message.error(errorMessage)\r\n    }\r\n  }\r\n\r\n  initColumns = () => {\r\n    this.columns = [\r\n      {\r\n        title: '分类的名称',\r\n        dataIndex: 'name',\r\n        width: 500,\r\n      },\r\n      {\r\n        title: '操作',\r\n        render: category => (<LinkButton onClick={() => {\r\n          this.category = category // 保存当前分类, 其它地方都可以读取到\r\n          this.setState({ showStatus: 2})\r\n        }}>修改分类</LinkButton>)\r\n      }\r\n    ];\r\n  }\r\n\r\n  // 处理重新获取分页数据\r\n  handleReGetData = async (page, per_page) => {\r\n    const { data, status, message: errorMessage } = await reqCategoryList(page, per_page)\r\n    if (status === 0) {\r\n      this.setState({\r\n        categorys: data\r\n      })\r\n    } else {\r\n      message.error(errorMessage)\r\n    }\r\n  }\r\n\r\n  // 选择每页展示数量变化\r\n  onShowSizeChange = (current, pageSize) => {\r\n    // current = page , pageSize = per_page\r\n    this.setState({\r\n      page: current,\r\n      per_page: pageSize\r\n    })\r\n    this.handleReGetData(current, pageSize)\r\n  }\r\n\r\n  // 选择页码变化\r\n  onChange = (page) => {\r\n    this.setState({\r\n      page\r\n    }, () => {\r\n      const { page, per_page } = this.state\r\n      this.handleReGetData(page, per_page)\r\n    })\r\n  }\r\n\r\n  // modal 确认之后\r\n  onOk = () => {\r\n    this.form.validateFields(async (err, values) => {\r\n      if(!err){\r\n        const {showStatus} = this.state\r\n        const {categoryName} = values\r\n        let result = null\r\n        if(showStatus === 2){\r\n          // 更新\r\n          const {_id} = this.category\r\n          result = await reqUpdateCategory(_id, categoryName)\r\n        }\r\n        if(showStatus === 1){\r\n          // 添加\r\n          result = await reqAddCategory(categoryName)\r\n        }\r\n        if(result.status === 0){\r\n          message.success(`${showStatus === 1 ? \"添加\" : \"修改\"}成功`)\r\n          this.form.resetFields()\r\n          this.setState({\r\n            showStatus: 0\r\n          })\r\n          const {per_page, page} = this.state\r\n          this.handleReGetData(page, per_page)\r\n        }else{\r\n          this.setState({\r\n            showStatus: 0\r\n          })\r\n          message.error(\"服务器错误，请稍后重试。\")\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  // modal 取消\r\n\r\n  onCancel = () => {\r\n    this.form.resetFields()\r\n    this.setState({\r\n      showStatus: 0\r\n    })\r\n  }\r\n\r\n  // 显示模态框\r\n  showModal = () => {\r\n    this.category = {}\r\n    this.setState({\r\n      showStatus: 1\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const extra = (\r\n      <Button type=\"primary\" onClick={this.showModal}>\r\n        <Icon type=\"plus\" />\r\n        添加\r\n      </Button>\r\n    )\r\n\r\n    // 读取分类\r\n    const category = this.category || {}\r\n\r\n    const { categorys, total, per_page, page, loading } = this.state\r\n\r\n    const paginationOptions = {\r\n      defaultPageSize: per_page,\r\n      showQuickJumper: true,\r\n      total: total,\r\n      onShowSizeChange: this.onShowSizeChange,\r\n      showSizeChanger: true,\r\n      current: page,\r\n      onChange: this.onChange\r\n    }\r\n    return (\r\n      <div className=\"category\">\r\n        <Card extra={extra} style={{ width: \"100%\" }}>\r\n          <Table\r\n            bordered\r\n            rowKey=\"_id\"\r\n            columns={this.columns}\r\n            dataSource={categorys}\r\n            pagination={paginationOptions}\r\n            loading={loading}\r\n          />\r\n        </Card>\r\n\r\n        <Modal\r\n          title={this.state.showStatus === 1 ? \"添加分类\" : \"修改分类\"}\r\n          visible={this.state.showStatus !== 0}\r\n          onOk={this.onOk}\r\n          onCancel={this.onCancel}\r\n          okText=\"确认\"\r\n          cancelText=\"取消\"\r\n        >\r\n          <WrapperAddUpdateForm setForm={form => this.form = form} categoryName={category.name}/>\r\n        </Modal>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Category\r\n","import React, { Component } from 'react'\r\nimport {throttle} from 'lodash'\r\nimport {\r\n  Card,\r\n  Table,\r\n  Icon,\r\n  Select,\r\n  Button,\r\n  Input,\r\n  message\r\n} from 'antd'\r\nimport LinkButton from '../../component/link-button/link-button'\r\nimport { reqGetProduct, reqGetSearchProduct, reqUpdateProduct } from '../../api'\r\n\r\nclass Product extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      loading: false,\r\n      products: [], // 商品列表\r\n      searchType: \"name\",\r\n      k: '', // 搜索关键字\r\n      current: 1\r\n    }\r\n  }\r\n\r\n  componentWillMount() {\r\n    // 回到跳转的那一页\r\n    if (this.props.location.state) {\r\n      this.page = this.props.location.state.page\r\n    }\r\n    this.setState({\r\n      loading: true,\r\n      current: this.page ? this.page : 1\r\n    })\r\n    // 初始化表格列值\r\n    this.initColumns()\r\n    // 初始化表格数据\r\n    this.initProducts()\r\n    this.setState({\r\n      loading: false\r\n    })\r\n  }\r\n\r\n  initProducts = async () => {\r\n    const { searchType, k } = this.state\r\n    if (k) {\r\n      this.setState({\r\n        current: 1\r\n      })\r\n    }\r\n    let result = null\r\n    k ? result = await reqGetSearchProduct(searchType, k) : result = await reqGetProduct()\r\n    if (result.status === 0) {\r\n      this.setState({\r\n        products: result.data\r\n      })\r\n    } else {\r\n      message.error(result.message)\r\n    }\r\n\r\n  }\r\n\r\n  initColumns = () => {\r\n    this.columns = [\r\n      {\r\n        title: \"商品名称\",\r\n        dataIndex: \"name\"\r\n      },\r\n      {\r\n        title: \"商品描述\",\r\n        dataIndex: \"desc\"\r\n      },\r\n      {\r\n        title: \"价格\",\r\n        dataIndex: \"price\",\r\n        render: (price) => '¥' + price\r\n      },\r\n      {\r\n        title: \"状态\",\r\n        render: ({ status, _id }) => {\r\n          let btnText = '下架'\r\n          let text = '在售'\r\n          if (status === 2) {\r\n            btnText = '上架'\r\n            text = '已下架'\r\n          }\r\n          return (\r\n            <span>\r\n              <Button onClick={() => this.updateProStatus(_id, status)}>{btnText}</Button>\r\n              <span>{text}</span>\r\n            </span>\r\n          )\r\n        }\r\n      },\r\n      {\r\n        title: \"操作\",\r\n        width: 120,\r\n        render: (product) => (\r\n          <span>\r\n            <LinkButton onClick={() => \r\n              this.props.history.push({ pathname: `/product/detail/${product._id}`, state: { product, page: this.state.current } })\r\n              }>\r\n                详情\r\n            </LinkButton>\r\n            <LinkButton onClick={() => this.props.history.push({ pathname: `/product/addupdate/${product._id}/${this.state.current}`, state: { product } })}>修改</LinkButton>\r\n          </span>\r\n        )\r\n      }\r\n    ]\r\n  }\r\n\r\n  // 处理输入框值改变\r\n  handleChange = (e) => {\r\n    this.setState({\r\n      k: e.target.value\r\n    })\r\n  }\r\n\r\n  // 商品上下架管理\r\n  updateProStatus = throttle(async (proId, status) => {\r\n    status = status === 1 ? 2 : 1\r\n    const result = await reqUpdateProduct(proId, {status})\r\n    if (result.status === 0) {\r\n      message.success(\"更新成功\")\r\n      this.initProducts()\r\n    } else {\r\n      message.error(\"更新失败，请稍后重试。\")\r\n    }\r\n  }, 2000)\r\n\r\n  onChange = (page) => {\r\n    this.setState({\r\n      current: page,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const title = (\r\n      <span>\r\n        <Select\r\n          style={{ width: 200 }}\r\n          value={this.state.searchType}\r\n          onChange={val => this.setState({ searchType: val })}\r\n        >\r\n          <Select.Option value=\"name\">按名称搜索</Select.Option>\r\n          <Select.Option value=\"desc\">按描述搜索</Select.Option>\r\n        </Select>\r\n        <Input\r\n          type=\"text\"\r\n          placeholder=\"请输入关键字\"\r\n          value={this.state.k}\r\n          style={{ width: 200, margin: \"0 10px\" }}\r\n          onChange={this.handleChange}\r\n        />\r\n        <Button type=\"primary\" onClick={this.initProducts}>搜索</Button>\r\n      </span>\r\n    )\r\n\r\n    const extra = (\r\n      <Button type=\"primary\" onClick={() => this.props.history.push(`/product/addupdate/${this.state.current}`)}>\r\n        <Icon type=\"plus\" />\r\n        添加商品\r\n      </Button>\r\n    )\r\n\r\n    const { loading, products, current } = this.state\r\n\r\n    const paginationOptions = {\r\n      defaultPageSize: 3,\r\n      showQuickJumper: true,\r\n      showSizeChanger: true,\r\n      current,\r\n      onChange: this.onChange\r\n    }\r\n\r\n    return (\r\n      <Card title={title} extra={extra}>\r\n        <Table\r\n          bordered\r\n          rowKey=\"_id\"\r\n          columns={this.columns}\r\n          dataSource={products}\r\n          pagination={paginationOptions}\r\n          loading={loading}\r\n        />\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Product","import React, { Component } from 'react'\r\nimport {\r\n  Card,\r\n  List,\r\n  Icon,\r\n  message\r\n} from 'antd'\r\nimport LinkButton from '../../../component/link-button/link-button'\r\nimport './index.less'\r\nimport { reqProductDetail, reqCategoryName } from '../../../api'\r\nconst Item = List.Item\r\n\r\nclass ProductDetail extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      product: {},\r\n      categoryName: \"\"\r\n    }\r\n  }\r\n\r\n  async componentWillMount() {\r\n    if (this.props.location.state) {\r\n      this.page = this.props.location.state.page\r\n      this.setState({\r\n        product: this.props.location.state.product\r\n      })\r\n      this.getCategoryName(this.props.location.state.product.categoryId)\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    let product = this.state.product\r\n    if (!product || !product._id) {\r\n      // 没数据 重新获取\r\n      const { id } = this.props.match.params\r\n      await this.initGetProductDetail(id)\r\n    } else {\r\n      // 有数据 直接获取\r\n      this.getCategoryName(product.categoryId)\r\n    }\r\n  }\r\n\r\n\r\n  getCategoryName = async (_id) => {\r\n    // 有数据\r\n    // 把分类ID转换成分类名称\r\n    const result = await reqCategoryName(_id)\r\n    if (result.status === 0) {\r\n      this.setState({\r\n        categoryName: result.data[0].name\r\n      })\r\n    } else {\r\n      message.error(result.message)\r\n    }\r\n  }\r\n\r\n  initGetProductDetail = async (_id) => {\r\n    const result = await reqProductDetail(_id)\r\n    if (result.status === 0) {\r\n      this.setState({\r\n        product: result.data[0]\r\n      }, () => {\r\n        this.getCategoryName(this.state.product.categoryId)\r\n      })\r\n    } else {\r\n      this.props.history.replace(\"/product\")\r\n      message.error(result.message)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    // card title\r\n    const title = (\r\n      <span>\r\n        <LinkButton onClick={() => this.props.history.replace({ pathname: \"/product\", state: { page: this.page } })}>\r\n          <Icon type=\"arrow-left\" />\r\n        </LinkButton>\r\n        <span>商品详情</span>\r\n      </span>\r\n    )\r\n\r\n\r\n    const { name, desc, price, categoryId, detail, imgs } = this.state.product\r\n    const IMG_BASE_URL = 'http://localhost:5000/public/upload/'\r\n\r\n\r\n    return (\r\n      <Card title={title} className=\"detail\">\r\n        <List>\r\n          <Item>\r\n            <span className=\"detail-left\">商品名称：</span>\r\n            <span>{name}</span>\r\n          </Item>\r\n          <Item>\r\n            <span className=\"detail-left\">商品描述：</span>\r\n            <span>{desc}</span>\r\n          </Item>\r\n          <Item>\r\n            <span className=\"detail-left\">商品价格：</span>\r\n            <span>{price}</span>\r\n          </Item>\r\n          <Item>\r\n            <span className=\"detail-left\">所属分类：</span>\r\n            <span>{this.state.categoryName}</span>\r\n          </Item>\r\n          <Item>\r\n            <span className=\"detail-left\">商品图片：</span>\r\n            <span>\r\n              {\r\n                (imgs && imgs.length > 0) && imgs.map((image, index) => (\r\n                  <img src={IMG_BASE_URL + image} key={index} className=\"detail-img\" alt=\"product img\" />\r\n                ))\r\n              }\r\n            </span>\r\n          </Item>\r\n          <Item>\r\n            <span className=\"detail-left\">商品详情：</span>\r\n            <div dangerouslySetInnerHTML={{ __html: detail }}></div>\r\n          </Item>\r\n        </List>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ProductDetail","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Upload, Icon, Modal, message } from 'antd';\r\nimport { IMG_BASE_URL } from '../../../utils/constants'\r\nimport { reqDeleteImg } from '../../../api';\r\n\r\nfunction getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}\r\n\r\nclass PicturesWall extends React.Component {\r\n\r\n  static propTypes = {\r\n    imgs: PropTypes.array\r\n  }\r\n\r\n  state = {\r\n    previewVisible: false,\r\n    previewImage: '',\r\n    fileList: [],\r\n    imgs: []\r\n  };\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    // 根据传入的imgs生成符合条件的fileList\r\n    // 更新图片不能返回原来的 prevState.imgs.length === prevState.fileList.length\r\n    if(nextProps.imgs && nextProps.imgs.length > 0 && prevState.imgs.length === prevState.fileList.length){\r\n      let imgs = nextProps.imgs.map((img, index) => {\r\n        return {\r\n          uid: - index,\r\n          url: IMG_BASE_URL + img,\r\n          status: \"done\",\r\n          name: img\r\n        }\r\n      })\r\n      return {\r\n        fileList: imgs,\r\n        imgs: nextProps.imgs\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  handleCancel = () => this.setState({ previewVisible: false });\r\n\r\n  /* \r\n  进行大图预览的回调函数\r\n  当前选中的图片对应的file\r\n  */\r\n  handlePreview = async file => {\r\n    if (!file.url && !file.preview) { // 如果file值没有图片url 只进行一次base64转换\r\n      file.preview = await getBase64(file.originFileObj);\r\n    }\r\n\r\n    this.setState({\r\n      previewImage: file.url || file.preview,\r\n      previewVisible: true,\r\n    });\r\n  };\r\n\r\n  /* \r\n  在file的状态改变时的监听回调\r\n  给我传的是最新的fileList\r\n  file 为当前操作的file\r\n  */\r\n  handleChange = async ({ fileList, file }) => {\r\n    // 修改fileList最后一张图片\r\n    // 即是修改当前操作的图片\r\n    // 因为最后直接更新的是fileList\r\n    if(file.status === 'done'){\r\n      file = fileList[fileList.length - 1]\r\n      const {name, url} = file.response.data\r\n      file.name = name\r\n      file.url = url\r\n    }else if(file.status === 'removed'){\r\n      // 删除图片\r\n      const result = await reqDeleteImg(file.name)\r\n      if(result.status === 0){\r\n        message.success(\"删除图片成功\")\r\n      }else{\r\n        message.error(\"服务器错误，请稍后重试。\")\r\n      }\r\n    }\r\n    this.setState({ fileList })\r\n  };\r\n\r\n  // 收集上传的图片名称\r\n  getImgs = () => {\r\n    return this.state.fileList.map(file => file.name)\r\n  }\r\n\r\n  render() {\r\n    const { previewVisible, previewImage, fileList } = this.state;\r\n    const uploadButton = (\r\n      <div>\r\n        <Icon type=\"plus\" />\r\n        <div className=\"ant-upload-text\">Upload</div>\r\n      </div>\r\n    );\r\n    return (\r\n      <div className=\"clearfix\">\r\n        <Upload\r\n          action=\"/api/products/image/upload\"\r\n          listType=\"picture-card\"\r\n          fileList={fileList}\r\n          onPreview={this.handlePreview}\r\n          onChange={this.handleChange}\r\n        >\r\n          {fileList.length >= 8 ? null : uploadButton}\r\n        </Upload>\r\n        <Modal visible={previewVisible} footer={null} onCancel={this.handleCancel}>\r\n          <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PicturesWall","/*\r\n * @Description: \r\n * @Version: 2.0\r\n * @Autor: Darren\r\n * @Date: 2019-11-27 21:48:30\r\n * @LastEditors: Darren\r\n * @LastEditTime: 2019-11-28 00:22:27\r\n */\r\nexport const IMG_BASE_URL = \"http://localhost:5000/public/upload/\"\r\n\r\nexport const API_BASE_URL = \"http://localhost:5000/api\"","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { debounce } from 'lodash';\r\nimport { Editor } from 'react-draft-wysiwyg';\r\nimport { EditorState, convertToRaw, ContentState } from 'draft-js';\r\nimport draftToHtml from 'draftjs-to-html';\r\nimport htmlToDraft from 'html-to-draftjs';\r\nimport 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';\r\nimport { API_BASE_URL } from '../../../utils/constants'\r\n\r\nclass RichTextEditor extends Component {\r\n\r\n  static propTypes = {\r\n    detail: PropTypes.string\r\n  }\r\n\r\n  state = {\r\n    editorState: EditorState.createEmpty(),\r\n    detail: \"\"\r\n  }\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    if(nextProps.detail && nextProps.detail !== prevState.detail){\r\n      // 根据detail生成一个editorState\r\n      const contentBlock = htmlToDraft(nextProps.detail)\r\n      const contentState = ContentState.createFromBlockArray(contentBlock.contentBlocks)\r\n      const editorState = EditorState.createWithContent(contentState)\r\n      // 更新状态\r\n      return {\r\n        editorState,\r\n        detail: nextProps.detail\r\n      }\r\n    }\r\n    return null\r\n  }\r\n  \r\n\r\n  onEditorStateChange = debounce((editorState) => {\r\n    this.setState({\r\n      editorState,\r\n    });\r\n  }, 0);\r\n\r\n  // 上传图片\r\n  uploadImageCallBack = (file) => {\r\n    return new Promise(\r\n      (resolve, reject) => {\r\n        const xhr = new XMLHttpRequest();\r\n        xhr.open('POST', \"/api/products/image/upload\");\r\n        const data = new FormData();\r\n        data.append('file', file);\r\n        xhr.send(data);\r\n        xhr.addEventListener('load', () => {\r\n          const response = JSON.parse(xhr.responseText); // {status: 0, data: {}}\r\n          debugger\r\n          resolve({ data: { link: response.data.url } })\r\n        });\r\n        xhr.addEventListener('error', () => {\r\n          const error = JSON.parse(xhr.responseText);\r\n          reject(error);\r\n        });\r\n      }\r\n    );\r\n  }\r\n\r\n  // 方便ref获取我们富文本编辑器的内容\r\n  getDetail = () => {\r\n    const { editorState } = this.state\r\n    return draftToHtml(convertToRaw(editorState.getCurrentContent()))\r\n  }\r\n\r\n  render() {\r\n\r\n    const { editorState } = this.state;\r\n\r\n    return (\r\n      <div>\r\n\r\n        <Editor\r\n          editorState={editorState}\r\n          toolbar={{\r\n            image: { uploadCallback: this.uploadImageCallBack, alt: { present: true, mandatory: true } },\r\n          }}\r\n          toolbarClassName=\"toolbarClassName\"\r\n          wrapperClassName=\"wrapperClassName\"\r\n          editorStyle={{ height: 400, overflow: \"auto\", lineHeight: 1, border: \"1px solid #000\", padding: \"0 0 10px 10px\", margin: 10 }}\r\n          onEditorStateChange={this.onEditorStateChange}\r\n        />\r\n        {/* <textarea\r\n          disabled\r\n          style={{ height: 200 }}\r\n        /> */}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default RichTextEditor\r\n\r\n","import React, { Component } from 'react'\r\nimport {\r\n  Form,\r\n  Input,\r\n  Icon,\r\n  Select,\r\n  Card,\r\n  Button,\r\n  message\r\n} from 'antd'\r\nimport { reqProductDetail } from '../../../api'\r\nimport LinkButton from '../../../component/link-button/link-button'\r\nimport { reqCategorys, reqUpdateProduct, reqAddProduct } from '../../../api'\r\nimport PicturesWall from '../pictures-wall'\r\nimport RichTextEditor from '../rich-text-editor'\r\n\r\nconst Item = Form.Item\r\nconst Option = Select.Option\r\nclass ProductAddUpdate extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.pwRef = React.createRef()\r\n    this.editorRef = React.createRef()\r\n    this.state = {\r\n      categorys: [],\r\n      product: {},\r\n      isUpdate: false\r\n    }\r\n  }\r\n\r\n  async componentWillMount() {\r\n    // 第一次进入\r\n    if (this.props.location.state) {\r\n      if (this.props.location.state.product) {\r\n        this.isUpdate = !!this.props.location.state.product._id\r\n        this.product = this.props.location.state.product\r\n      }\r\n    }\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.getCategorys()\r\n    if (!this.props.location.state && this.props.match.params.id) {\r\n      const result = await reqProductDetail(this.props.match.params.id)\r\n      if (result.status === 0) {\r\n        this.setState({\r\n          product: result.data[0],\r\n          isUpdate: true\r\n        })\r\n      } else {\r\n        message.error(result.message)\r\n      }\r\n    }\r\n  }\r\n\r\n  getCategorys = async () => {\r\n    const result = await reqCategorys()\r\n    if (result.status === 0) {\r\n      this.setState({\r\n        categorys: result.data\r\n      })\r\n    } else {\r\n      message.error(result.message)\r\n    }\r\n  }\r\n\r\n  // 对价格进行自定义验证\r\n  validatePrice = (rule, value, callback) => {\r\n    if ((value * 1) <= 0) {\r\n      callback(\"价格必须大于0\")\r\n    } else {\r\n      callback()\r\n    }\r\n  }\r\n\r\n  // 提交表单\r\n  handleSubmit = (e) => {\r\n    e.preventDefault()\r\n\r\n    this.props.form.validateFields(async (err, values) => {\r\n      if (!err) {\r\n        const { name, price, desc, categoryId } = values\r\n\r\n        // 收集上传的图片文件名的数组\r\n        const imgs = this.pwRef.current.getImgs()\r\n\r\n        // 收集富文本编辑器的内容\r\n        const detail = this.editorRef.current.getDetail()\r\n\r\n        const product = { name, price, desc, categoryId, detail, imgs }\r\n        let result = null\r\n        if (this.isUpdate || this.state.isUpdate) {\r\n          // 更新商品数据\r\n          result = await reqUpdateProduct(((this.product && this.product._id) || this.state.product._id), product)\r\n          if (result.status === 0) {\r\n            message.success(\"更新商品信息成功\")\r\n            this.props.history.replace(\"/product\")\r\n          } else {\r\n            message.error(result.message)\r\n          }\r\n        } else {\r\n          result = await reqAddProduct(product)\r\n          if (result.status === 0) {\r\n            message.success(\"添加商品信息成功\")\r\n            this.props.history.replace(\"/product\")\r\n          } else {\r\n            message.error(result.message)\r\n          }\r\n        }\r\n      } else {\r\n        message.error(\"必填项缺失！\")\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n    let { isUpdate, product = {} } = this\r\n\r\n    // 解决刷新的问题\r\n    if (!product._id) {\r\n      product = this.state.product\r\n      isUpdate = this.state.isUpdate\r\n    }\r\n\r\n    const title = (\r\n      <span>\r\n        <LinkButton onClick={() => this.props.history.replace({ pathname: \"/product\", state: { page: Number(this.props.match.params.page) } })}>\r\n          <Icon type=\"arrow-left\" />\r\n        </LinkButton>\r\n        <span>\r\n          {\r\n            isUpdate ? \"更新商品\" : \"添加商品\"\r\n          }\r\n        </span>\r\n      </span>\r\n    )\r\n\r\n    const { getFieldDecorator } = this.props.form\r\n\r\n\r\n    const formLayout = {\r\n      labelCol: { span: 2 },\r\n      wrapperCol: { span: 8 }\r\n    }\r\n\r\n    return (\r\n      <Card title={title} style={{ marginBottom: 20 }}>\r\n        <Form {...formLayout} onSubmit={this.handleSubmit}>\r\n          <Item label=\"商品名称\">\r\n            {\r\n              getFieldDecorator(\"name\", {\r\n                initialValue: product.name || \"\",\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: \"商品名称为必选项\"\r\n                  }\r\n                ]\r\n              })(<Input type=\"text\" placeholder=\"请输入商品名称\" />)\r\n            }\r\n          </Item>\r\n          <Item label=\"商品描述\">\r\n            {\r\n              getFieldDecorator(\"desc\", {\r\n                initialValue: product.desc || \"\",\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: \"商品描述为必选项\"\r\n                  }\r\n                ]\r\n              })(<Input type=\"text\" placeholder=\"请输入商品描述\" />)\r\n            }\r\n          </Item>\r\n          <Item label=\"商品价格\">\r\n            {\r\n              getFieldDecorator(\"price\", {\r\n                initialValue: product.price || \"\",\r\n                rules: [\r\n                  {\r\n                    validator: this.validatePrice\r\n                  },\r\n                  {\r\n                    required: true,\r\n                    message: \"商品价格为必选项\"\r\n                  }\r\n                ]\r\n              })(<Input type=\"number\" placeholder=\"请输入商品价格\" addonAfter=\"元\" />)\r\n            }\r\n          </Item>\r\n          <Item label=\"商品分类\">\r\n            {\r\n              getFieldDecorator(\"categoryId\", {\r\n                initialValue: product.categoryId || \"\",\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: \"商品分类为必选项\"\r\n                  }\r\n                ]\r\n              })(\r\n                <Select>\r\n                  <Option value=\"\">未选择</Option>\r\n                  {\r\n                    this.state.categorys.length > 0 && this.state.categorys.map(category => (\r\n                      <Option value={category._id} key={category._id}>{category.name}</Option>\r\n                    ))\r\n                  }\r\n                </Select>\r\n              )\r\n            }\r\n          </Item>\r\n          <Item label=\"商品图片\">\r\n            <div>\r\n              {/* 将容器交给需要标记的标签对象 在解析时就会自动将标签对象保存到容器中 (属性名为current 属性值为标签对象) */}\r\n              <PicturesWall ref={this.pwRef} imgs={product.imgs || this.state.product.imgs} />\r\n            </div>\r\n          </Item>\r\n          <Item label=\"商品详情\" wrapperCol={{ span: 20 }}>\r\n            <div>\r\n              <RichTextEditor ref={this.editorRef} detail={product.detail || this.state.product.detail} />\r\n            </div>\r\n          </Item>\r\n          <Item>\r\n            <Button type=\"primary\" htmlType=\"submit\">提交</Button>\r\n          </Item>\r\n        </Form>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\nconst WrapperProductAddUpdate = Form.create()(ProductAddUpdate)\r\nexport default WrapperProductAddUpdate","import React, { Component } from 'react'\r\nimport {Redirect, Route, Switch} from 'react-router-dom'\r\nimport Product from './product'\r\nimport ProductDetail from './product-detail'\r\nimport WrapperProductAddUpdate from './product-add-update'\r\nimport './product.less'\r\nclass ProductHome extends Component {\r\n  render() {\r\n    return (\r\n      <Switch>\r\n        <Route path=\"/product\" exact component={Product}/>\r\n        <Route path=\"/product/detail/:id\" component={ProductDetail}/>\r\n        <Route path=\"/product/addupdate/:id/:page\" component={WrapperProductAddUpdate}/>\r\n        <Route path=\"/product/addupdate/:page\" component={WrapperProductAddUpdate}/>\r\n        <Redirect to=\"/product\"/>\r\n      </Switch>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ProductHome","import React, { Component, Fragment } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  Pagination\r\n} from 'antd'\r\n\r\nclass MPagination extends Component {\r\n\r\n  static propTypes = {\r\n    pageSizeOptions: PropTypes.array,\r\n    total: PropTypes.number\r\n  }\r\n\r\n  static defaultProps = {\r\n    pageSizeOptions: ['2', '3', '5', '10'],\r\n    total: 0\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      current: 1\r\n    }\r\n  }\r\n\r\n  // 展示一共多少条数据\r\n  showTotal = (total) => {\r\n    return `总共${total}条`\r\n  }\r\n\r\n  // 页码改变后的回调\r\n  onChange = (pageNumber, pageSize) => {\r\n    this.setState({\r\n      current: pageNumber\r\n    })\r\n    // 通知父组件我的状态改变啦\r\n    this.props.handleChange && this.props.handleChange(pageNumber, pageSize)\r\n  }\r\n\r\n  // pageSize 改变后的回调\r\n  onShowSizeChange = (current, pageSize) => {\r\n    // 跳回第一页\r\n    this.setState({\r\n      current: 1\r\n    }, () => {\r\n      this.props.handleChange && this.props.handleChange(current, pageSize)\r\n    })\r\n\r\n    \r\n  }\r\n\r\n  render() {\r\n\r\n    const { pageSizeOptions, total } = this.props\r\n\r\n\r\n    return (\r\n      <Fragment>\r\n        {\r\n          total ?\r\n            <div className=\"pagination\" style={{ marginTop: 20, float: \"right\" }}>\r\n              <Pagination\r\n              pageSizeOptions={pageSizeOptions}\r\n              defaultPageSize={Number(pageSizeOptions[0])}\r\n              showQuickJumper\r\n              showSizeChanger\r\n              showTotal={this.showTotal}\r\n              current={this.state.current}\r\n              total={total}\r\n              onChange={this.onChange}\r\n              onShowSizeChange={this.onShowSizeChange}\r\n              style={{float: \"right\"}}\r\n              />\r\n            </div>\r\n            :\r\n            \"\"\r\n        }\r\n      </Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MPagination","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  Form,\r\n  Button,\r\n  Input\r\n} from 'antd'\r\n\r\nconst Item = Form.Item\r\n\r\nclass AddForm extends Component {\r\n\r\n  static propTypes = {\r\n    setForm: PropTypes.func.isRequired\r\n  }\r\n\r\n\r\n  componentWillMount(){\r\n    this.props.setForm(this.props.form)\r\n  }\r\n\r\n  render() {\r\n    const { getFieldDecorator } = this.props.form\r\n    const formItemLayout = {\r\n      labelCol: { span: 4 },\r\n      wrapperCol: { span: 16 },\r\n    }\r\n\r\n    return (\r\n      <Form>\r\n        <Item label=\"角色名称\" {...formItemLayout}>\r\n          {\r\n            getFieldDecorator(\r\n              \"roleName\", {\r\n              initialValue: \"\",\r\n              rules: [\r\n                {\r\n                  required: true,\r\n                  message: \"请输入角色名称\"\r\n                }\r\n              ]\r\n            }\r\n            )(\r\n              <Input placeholder=\"请输入角色名称\"/>\r\n            )\r\n          }\r\n        </Item>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AddForm = Form.create()(AddForm)","import React, { Component, PureComponent } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  Form,\r\n  Input,\r\n  Tree\r\n} from 'antd'\r\nimport menuList from '../../../config/menuConfig'\r\n\r\nconst Item = Form.Item\r\nconst { TreeNode } = Tree\r\nclass AuthForm extends PureComponent {\r\n\r\n  static propTypes = {\r\n    role: PropTypes.object.isRequired,\r\n    closeAuth: PropTypes.bool.isRequired\r\n  }\r\n\r\n  static defaultProps = {\r\n    role: {},\r\n    closeAuth: false\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      checkedKeys: [],\r\n      _id: \"\"\r\n    }\r\n    // 根据传入角色的menus来更新checkedKeys状态\r\n    this.nodes = this.getNodes(menuList)\r\n  }\r\n\r\n\r\n  static getDerivedStateFromProps(nextProps, prevState) {\r\n    const menus = nextProps.role.menus\r\n    const closeAuth = nextProps.closeAuth\r\n    // 取消了 || 取消之后 点击其他角色的权限\r\n    if (closeAuth || nextProps.role._id != prevState._id) {\r\n      return {\r\n        checkedKeys: menus,\r\n        _id: nextProps.role._id\r\n      }\r\n    }\r\n    // 组件内部状态自己更新\r\n    return null\r\n  }\r\n\r\n  getCheckedKeys = () => this.state.checkedKeys\r\n\r\n  // 动态生成TreeNode\r\n  getNodes = (menuList) => {\r\n    return menuList.reduce((pre, item) => {\r\n      pre.push(\r\n        <TreeNode title={item.title} key={item.key}>\r\n          {\r\n            item.children ? this.getNodes(item.children) : null\r\n          }\r\n        </TreeNode>\r\n      )\r\n      return pre\r\n    }, [])\r\n  }\r\n\r\n  // 选择对应的权限 \r\n  onCheck = (checkedKeys) => {\r\n    console.log(\"checkedKeys\", checkedKeys)\r\n    this.setState({\r\n      checkedKeys\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const { role } = this.props\r\n    const formItemLayout = {\r\n      labelCol: { span: 4 },\r\n      wrapperCol: { span: 16 }\r\n    }\r\n    return (\r\n      <div>\r\n        <Item label=\"角色名称\" {...formItemLayout}>\r\n          <Input value={role.name} disabled />\r\n        </Item>\r\n        <Tree\r\n          checkable\r\n          defaultExpandAll\r\n          // defaultSelectedKeys={['0-0-0', '0-0-1']} // 点击文本内容 会添加背景\r\n          checkedKeys={this.state.checkedKeys}\r\n          onSelect={this.onSelect}\r\n          onCheck={this.onCheck}\r\n        >\r\n          <TreeNode title=\"平台权限\" key=\"all\">\r\n            {/* 这下面的子节点菜单 要根据menuConfig中的来生成 */}\r\n            {\r\n              this.nodes ? this.nodes : null\r\n            }\r\n          </TreeNode>\r\n        </Tree>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AuthForm","import React, { Component } from 'react'\r\nimport {\r\n  Card,\r\n  Table,\r\n  Modal,\r\n  Button,\r\n  message,\r\n} from 'antd'\r\nimport MPagination from '../../component/pagination'\r\nimport localStorageUtils from '../../utils/localStorageUtils'\r\nimport { formatDate } from '../../utils/dateUtils'\r\nimport LinkButton from '../../component/link-button/link-button'\r\nimport { reqGetRoles, reqAddRole, reqUpdateRole } from '../../api'\r\nimport AddForm from './add-form'\r\nimport AuthForm from './auth-form'\r\nclass Role extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    // 初始化表格  th显示\r\n    this.initColumns()\r\n    // 设置ref 获取auth-form内的状态数据\r\n    this.authRef = React.createRef()\r\n    this.state = {\r\n      roles: [],\r\n      total: 0,\r\n      loading: false,\r\n      isShowAdd: false, // 是否显示添加角色按钮\r\n      isShowAuth: false, // 是否显示授权按钮\r\n      current: 1,\r\n      pageSize: 3,\r\n      closeAuth: false\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    // 发送ajax请求获取角色列表\r\n    this.getRoles({ page: 1, per_page: 3 })\r\n  }\r\n\r\n  // 初始化表格  th显示\r\n  initColumns = () => {\r\n    this.columns = [\r\n      {\r\n        title: \"角色名称\",\r\n        dataIndex: \"name\"\r\n      },\r\n      {\r\n        title: \"创建时间\",\r\n        dataIndex: \"create_time\",\r\n        // render: (create_time) => formatDate(create_time),\r\n        render: formatDate\r\n      },\r\n      {\r\n        title: \"授权时间\",\r\n        dataIndex: \"auth_time\",\r\n        render: formatDate\r\n      },\r\n      {\r\n        title: \"授权人\",\r\n        dataIndex: \"auth_name\"\r\n      },\r\n      {\r\n        title: \"操作\",\r\n        render: (role) => {\r\n          return (\r\n            <LinkButton onClick={() => this.showAuth(role)}>设置权限</LinkButton>\r\n          )\r\n        }\r\n      }\r\n    ]\r\n  }\r\n\r\n  getRoles = async (pageObj) => {\r\n    this.setState({\r\n      loading: true\r\n    })\r\n    const result = await reqGetRoles(pageObj)\r\n    if (result.status === 0) {\r\n      this.setState({\r\n        roles: result.data,\r\n        total: result.total,\r\n        loading: false\r\n      })\r\n    } else {\r\n      this.setState({\r\n        loading: false\r\n      })\r\n      message.error(result.message)\r\n    }\r\n  }\r\n\r\n  onChangeCurPageOrPageSize = (pageNumber, pageSize) => {\r\n    this.setState({\r\n      current: pageNumber,\r\n      pageSize\r\n    })\r\n    this.getRoles({ page: pageNumber, per_page: pageSize })\r\n  }\r\n\r\n\r\n  // 确认添加角色\r\n  addRole = () => {\r\n    this.form.validateFields(async (err, values) => {\r\n      if(!err){\r\n        const {roleName} = values\r\n        const result = await reqAddRole(roleName)\r\n        if(result.status === 0){\r\n          message.success(\"添加角色成功\")\r\n          this.setState({\r\n            isShowAdd: false\r\n          })\r\n          this.getRoles({ page: 1, per_page: 3 })\r\n        }else{\r\n          message.error(result.message)\r\n        }\r\n      }else{\r\n        message.error(\"表单校验不通过\")\r\n      }\r\n    })\r\n  }\r\n\r\n  // 授权界面的显示\r\n  showAuth = (role) => {\r\n    this.role = role\r\n    this.setState({\r\n      isShowAuth: true,\r\n      closeAuth: false\r\n    })\r\n  }\r\n\r\n  // 更新角色权限\r\n  udpateRole = async () => {\r\n    const {role} = this\r\n    const updateRole = {}\r\n    updateRole.menus = this.authRef.current.getCheckedKeys()\r\n    updateRole.auth_name = localStorageUtils.getUser().username\r\n    updateRole.auth_time = Date.now()\r\n    const result = await reqUpdateRole(role._id, updateRole)\r\n    if(result.status === 0){\r\n      message.success(\"更新角色权限成功\")\r\n      this.setState({\r\n        isShowAuth: false\r\n      })\r\n      this.getRoles({ page: this.state.current, per_page: this.state.pageSize })\r\n    }else{\r\n      message.error(\"更新角色权限失败\")\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { roles, total, loading, isShowAdd, isShowAuth, closeAuth } = this.state\r\n    const title = (\r\n      <Button type=\"primary\" onClick={() => this.setState({isShowAdd: true})}>\r\n        添加角色\r\n      </Button>\r\n    )\r\n    return (\r\n      <Card title={title}>\r\n        <Table\r\n          bordered\r\n          rowKey=\"_id\"\r\n          dataSource={roles}\r\n          columns={this.columns}\r\n          pagination={false}\r\n          loading={loading}\r\n        />\r\n        <MPagination\r\n          total={total}\r\n          handleChange={this.onChangeCurPageOrPageSize} //当前页及条数改变都会从子组件触发此方法，用于传递页码和条数\r\n          pageSizeOptions={['3', '5', '10', '20']}    \r\n        />\r\n\r\n        <Modal\r\n          title=\"添加角色\"\r\n          visible={isShowAdd}\r\n          onOk={this.addRole}\r\n          onCancel={() => {\r\n            this.form.resetFields()\r\n            this.setState({ isShowAdd: false })\r\n          }}\r\n        >\r\n          <AddForm setForm={form => this.form = form}/>\r\n        </Modal>\r\n\r\n        <Modal\r\n          title=\"设置角色权限\"\r\n          visible={isShowAuth}\r\n          onOk={this.udpateRole}\r\n          onCancel={() => {\r\n            // 把AuthForm设置的状态恢复\r\n            this.setState({ isShowAuth: false, closeAuth: true })\r\n          }}\r\n        >\r\n          <AuthForm role={this.role} closeAuth={closeAuth} ref={this.authRef}/>\r\n        </Modal>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Role","import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport {\r\n  Form,\r\n  Input,\r\n  Button,\r\n  Select\r\n} from 'antd'\r\nconst Item = Form.Item\r\nconst Option = Select.Option\r\n\r\nclass AddUpdateForm extends Component {\r\n\r\n  static propTypes = {\r\n    roles: PropTypes.array,\r\n    setForm: PropTypes.func.isRequired\r\n  }\r\n\r\n  static defaultProps = {\r\n    roles: []\r\n  }\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.props.setForm(this.props.form)\r\n    this.state = {\r\n      selectValue: \"请选择\"\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { getFieldDecorator } = this.props.form\r\n    const user = this.props.user || {}\r\n    const formLayout = {\r\n      labelCol: { span: 4 },\r\n      wrapperCol: { span: 18 }\r\n    }\r\n    const { roles } = this.props\r\n    return (\r\n      <Form {...formLayout}>\r\n        <Item label=\"用户名\">\r\n          {\r\n            getFieldDecorator(\r\n              \"username\",\r\n              {\r\n                initialValue: user.username || \"\",\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: \"请输入用户名\"\r\n                  }\r\n                ]\r\n              }\r\n            )(\r\n              <Input placeholder=\"请输入用户名\" />\r\n            )\r\n          }\r\n        </Item>\r\n        {\r\n          user._id ? null : \r\n          <Item label=\"密码\">\r\n            {\r\n              getFieldDecorator(\r\n                \"password\",\r\n                {\r\n                  initialValue: user.password || \"\",\r\n                  rules: [\r\n                    {\r\n                      required: true,\r\n                      message: \"请输入密码\"\r\n                    }\r\n                  ]\r\n                }\r\n              )(\r\n                <Input placeholder=\"请输入密码\" type=\"password\" />\r\n              )\r\n            }\r\n          </Item>\r\n        }\r\n\r\n        <Item label=\"邮箱\">\r\n          {\r\n            getFieldDecorator(\r\n              \"email\",\r\n              {\r\n                initialValue: user.email || \"\",\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: \"请输入邮箱\"\r\n                  }\r\n                ]\r\n              }\r\n            )(\r\n              <Input placeholder=\"请输入邮箱\" />\r\n            )\r\n          }\r\n        </Item>\r\n        <Item label=\"手机号\">\r\n          {\r\n            getFieldDecorator(\r\n              \"phone\",\r\n              {\r\n                initialValue: user.phone || \"\",\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: \"请输入手机号\"\r\n                  }\r\n                ]\r\n              }\r\n            )(\r\n              <Input placeholder=\"请输入手机号\" />\r\n            )\r\n          }\r\n        </Item>\r\n        <Item label=\"所属角色\">\r\n          {\r\n            getFieldDecorator(\r\n              \"role_id\",\r\n              {\r\n                initialValue: user.role_id || \"\",\r\n                rules: [\r\n                  {\r\n                    required: true,\r\n                    message: \"请选择角色\"\r\n                  }\r\n                ]\r\n              }\r\n            )(\r\n              <Select>\r\n                <Option value=\"\">请选择</Option>\r\n                {\r\n                  (roles.length > 0) && roles.map(role => (\r\n                    <Option value={role._id} key={role._id}>{role.name}</Option>\r\n                  ))\r\n                }\r\n              </Select>\r\n            )\r\n          }\r\n        </Item>\r\n      </Form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Form.create()(AddUpdateForm)","import React, { Component } from 'react'\r\nimport {\r\n  Table,\r\n  Button,\r\n  Card,\r\n  message,\r\n  Modal\r\n} from 'antd'\r\nimport { formatDate } from '../../utils/dateUtils'\r\nimport LinkButton from '../../component/link-button/link-button'\r\nimport { reqUserList, reqDeleteUser, reqAddUser, reqUpdateUser } from '../../api'\r\nimport AddUpdateForm from './add-update-form'\r\nimport MPagination from '../../component/pagination'\r\n\r\nconst { confirm } = Modal\r\nclass User extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.initColumns()\r\n    this.state = {\r\n      userList: [],\r\n      roles: [],\r\n      total: 0,\r\n      formVisible: false, // 控制modal隐藏显示\r\n    }\r\n  }\r\n\r\n  initColumns = () => {\r\n    this.columns = [\r\n      {\r\n        title: \"用户名\",\r\n        dataIndex: \"username\"\r\n      },\r\n      {\r\n        title: \"邮箱\",\r\n        dataIndex: \"email\"\r\n      },\r\n      {\r\n        title: \"电话\",\r\n        dataIndex: \"phone\"\r\n      },\r\n      {\r\n        title: \"注册时间\",\r\n        dataIndex: \"create_time\",\r\n        render: formatDate\r\n      },\r\n      {\r\n        title: \"所属角色\",\r\n        dataIndex: \"role_id\",\r\n        render: role_id => this.roleName[role_id]\r\n      },\r\n      {\r\n        title: \"操作\",\r\n        render: (user) => {\r\n          return (\r\n            <span>\r\n              <LinkButton onClick={() => this.handleEditUser(user)}>修改</LinkButton>\r\n              <LinkButton onClick={() => this.handleDeleteUser(user._id)}>删除</LinkButton>\r\n            </span>\r\n          )\r\n        }\r\n      }\r\n    ]\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.getUserList()\r\n  }\r\n\r\n  getUserList = async () => {\r\n    const result = await reqUserList()\r\n    if (result.status === 0) {\r\n      const { roles, users, total } = result.data\r\n      this.roleName = roles.reduce((pre, role) => {\r\n        pre[role._id] = role.name\r\n        return pre\r\n      }, {})\r\n      this.userList = users\r\n      this.setState({\r\n        userList: users.slice(0, 3),\r\n        roles,\r\n        total\r\n      })\r\n    } else {\r\n      message.error(\"获取用户列表失败，请稍后重试。\")\r\n    }\r\n  }\r\n\r\n  // 处理用户修改\r\n  handleEditUser = (user) => {\r\n    this.setState({\r\n      formVisible: true\r\n    })\r\n    this.user = user\r\n  }\r\n\r\n  // 处理用户删除\r\n  handleDeleteUser = async (_id) => {\r\n    confirm({\r\n      title: '确定要删除该用户吗？',\r\n      okType: 'danger',\r\n      onOk: async () => {\r\n        const result = await reqDeleteUser(_id)\r\n        if (result.status === 0) {\r\n          message.success(\"删除用户成功\")\r\n          this.getUserList()\r\n        } else {\r\n          message.error(\"删除用户失败\")\r\n        }\r\n      },\r\n      onCancel() {\r\n        console.log('Cancel');\r\n      },\r\n    });\r\n    this.setState({\r\n      formVisible: false\r\n    })\r\n  }\r\n\r\n  // 用户点击确定添加用户\r\n  handleOk = () => {\r\n    this.form.validateFields(async (err, values) => {\r\n      if (!err) {\r\n        const result = !(this.user && this.user._id) ? await reqAddUser(values) : await reqUpdateUser(this.user._id, values)\r\n        if (result.status === 0) {\r\n          message.success( ((this.user && this.user._id) ? \"更新\" : \"添加\")+ \"用户成功\")\r\n          this.getUserList()\r\n        } else {\r\n          message.error(\"添加用户失败，请稍后重试。\")\r\n        }\r\n      } else {\r\n        message.error(\"表单校验不通过\")\r\n      }\r\n    })\r\n    this.setState({\r\n      formVisible: false\r\n    })\r\n  }\r\n\r\n  handleCancel = () => {\r\n    this.user = {}\r\n    this.form.resetFields()\r\n    this.setState({\r\n      formVisible: false\r\n    })\r\n  }\r\n\r\n  handleChange = (page, pageSize) => {\r\n    this.setState({\r\n      userList: this.userList.slice(((page - 1) * pageSize), (page * pageSize))\r\n    })\r\n  }\r\n\r\n  render() {\r\n    const title = (\r\n      <Button icon=\"plus\" type=\"primary\" onClick={() => this.setState({ formVisible: true })}>\r\n        添加用户\r\n      </Button>\r\n    )\r\n\r\n    const { userList } = this.state\r\n    return (\r\n      <Card title={title}>\r\n        <Table\r\n          bordered\r\n          dataSource={userList}\r\n          columns={this.columns}\r\n          pagination={false}\r\n          rowKey=\"_id\"\r\n        />\r\n        <MPagination total={this.state.total} handleChange={this.handleChange} pageSizeOptions={['3', '5', '10', '20']} />\r\n        <Modal\r\n          title={(this.user && this.user._id) ? \"更新用户\" : \"添加用户\"}\r\n          visible={this.state.formVisible}\r\n          onOk={this.handleOk}\r\n          onCancel={this.handleCancel}\r\n        >\r\n          <AddUpdateForm roles={this.state.roles} user={this.user || {}} setForm={form => this.form = form} />\r\n        </Modal>\r\n      </Card>\r\n    )\r\n  }\r\n}\r\n\r\nexport default User","import React, { Component } from 'react'\r\nimport ReactEcharts from 'echarts-for-react';\r\nimport echarts from 'echarts';\r\nimport {\r\n  Card,\r\n  Button\r\n} from 'antd'\r\n\r\nclass Bar extends Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      sales: [5, 20, 36, 10, 10, 20], // 销量的数组\r\n      stores: [6, 10, 25, 20, 15, 10], // 库存的数组\r\n    }\r\n  }\r\n\r\n\r\n  getOption = (sales, stores) => {\r\n    return {\r\n      title: {\r\n        text: '测试数据'\r\n      },\r\n      tooltip: {},\r\n      legend: {\r\n        data: ['销量', '库存']\r\n      },\r\n      xAxis: {\r\n        data: [\"视频广告\", \"联盟广告\", \"邮件营销\", \"直接访问\", \"搜索引擎\"]\r\n      },\r\n      yAxis: {},\r\n      series: [\r\n        {\r\n          name: '访问来源',\r\n          type: 'pie',\r\n          radius: '55%',\r\n          data: [\r\n            { value: 235, name: '视频广告' },\r\n            { value: 274, name: '联盟广告' },\r\n            { value: 310, name: '邮件营销' },\r\n            { value: 335, name: '直接访问' },\r\n            { value: 400, name: '搜索引擎' }\r\n          ],\r\n          roseType: 'angle',\r\n          label: {\r\n            normal: {\r\n              textStyle: {\r\n                color: 'rgba(255, 255, 255, 0.3)'\r\n              }\r\n            }\r\n          },\r\n          labelLine: {\r\n            normal: {\r\n              lineStyle: {\r\n                color: 'rgba(255, 255, 255, 0.3)'\r\n              }\r\n            }\r\n          },\r\n          itemStyle: {\r\n            normal: {\r\n              color: '#c23531',\r\n              shadowBlur: 200,\r\n              shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n            }\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  }\r\n\r\n  update = () => {\r\n    this.setState(state => ({\r\n      sales: state.sales.map(sale => sale + 1),\r\n      stores: state.stores.reduce((pre, store) => {\r\n        pre.push(store - 1)\r\n        return pre\r\n      }, [])\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    const { stores, sales } = this.state\r\n    echarts.registerTheme('my_theme', {\r\n      backgroundColor: '#f4cccc'\r\n    });\r\n    return (\r\n      <div>\r\n        <Card>\r\n          <Button type=\"primary\" onClick={this.update}>更新</Button>\r\n        </Card>\r\n        <Card title=\"柱状图\">\r\n          <ReactEcharts\r\n            option={this.getOption(sales, stores)}\r\n            theme='my_theme'\r\n          />\r\n        </Card>\r\n      </div>\r\n\r\n    )\r\n  }\r\n}\r\n\r\nexport default Bar","import React, { Component } from 'react'\r\n\r\nclass Line extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        line\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Line","import React, { Component } from 'react'\r\n\r\nclass Pie extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        pie\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Pie","import React, { Component } from 'react'\r\nimport { Layout } from 'antd'\r\nimport { Redirect, Route, Switch } from 'react-router-dom'\r\nimport LeftNav from '../../component/left-nav/left-nav'\r\nimport MHeader from '../../component/header/header'\r\nimport Home from '../../pages/home/home'\r\nimport Category from '../../pages/category/category'\r\nimport ProductHome from '../../pages/product/home'\r\nimport Role from '../../pages/role/role'\r\nimport User from '../../pages/user/user'\r\nimport Bar from '../../pages/charts/bar'\r\nimport Line from '../../pages/charts/line'\r\nimport Pie from '../../pages/charts/pie'\r\n\r\nconst { Sider, Content, Header, Footer } = Layout\r\nclass Admin extends Component {\r\n\r\n  render() {\r\n    const user = JSON.parse(localStorage.getItem(\"user\") || \"{}\")\r\n    const menus = (user.role && user.role.menus) || []\r\n    if (menus && menus.length > 0) {\r\n      const pathname = this.props.history.location.pathname\r\n      // 浏览器输入\r\n      // 直接相等\r\n      console.log(menus.toString().indexOf(pathname))\r\n      if((menus.toString().indexOf(pathname)) === -1){\r\n        // product/addupdate\r\n        let path = (/^(\\/[\\w\\d_-]+)(?:\\/?)/.exec(pathname) && /^(\\/[\\w\\d_-]+)(?:\\/?)/.exec(pathname)[1]) || pathname\r\n        if(!(menus.toString().indexOf(path))){\r\n          return <Redirect to=\"/home\" />\r\n        }\r\n      }\r\n    }\r\n    if (!user._id) {\r\n      return <Redirect to=\"/login\" />\r\n    }\r\n    return (\r\n      <Layout style={{ height: \"100%\" }}>\r\n        <Sider>\r\n          <LeftNav />\r\n        </Sider>\r\n        <Layout>\r\n          <MHeader />\r\n          <Content style={{ background: 'white', margin: '20px', borderBox: \"box-sizing\" }}>\r\n            <Switch>\r\n              <Route path=\"/home\" component={Home} />\r\n              <Route path='/category' component={Category} />\r\n              <Route path='/product' component={ProductHome} />\r\n              <Route path='/role' component={Role} />\r\n              <Route path='/user' component={User} />\r\n              <Route path='/charts/bar' component={Bar} />\r\n              <Route path='/charts/line' component={Line} />\r\n              <Route path='/charts/pie' component={Pie} />\r\n              <Redirect to=\"/home\" />\r\n            </Switch>\r\n          </Content>\r\n          <Footer style={{ textAlign: \"center\", lineHeight: \"1\", height: 60 }}>\r\n            推荐使用谷歌浏览器访问效果更佳\r\n          </Footer>\r\n        </Layout>\r\n      </Layout>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Admin","import React from 'react';\nimport Login from './pages/login/login'\nimport Admin from './pages/admin/admin'\nimport {HashRouter, Route, Switch} from 'react-router-dom'\n\nfunction App() {\n  return (\n    <HashRouter>\n      <Switch>\n        <Route path=\"/login\" component={Login}/>\n        <Route path=\"/\" component={Admin}/>\n        <Route component={Admin}/>\n      </Switch>\n    </HashRouter>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","/*\n * @Description: \n * @Version: 2.0\n * @Autor: Darren\n * @Date: 2019-11-20 12:45:59\n * @LastEditors: Darren\n * @LastEditTime: 2019-11-21 14:49:38\n */\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './api'\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render( < App / > , document.getElementById('root'));\nserviceWorker.unregister();","module.exports = __webpack_public_path__ + \"static/media/logo.f089d709.jpg\";"],"sourceRoot":""}